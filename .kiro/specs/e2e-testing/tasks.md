# Implementation Plan

- [x] 1. Set up E2E testing infrastructure
  - [x] 1.1 Create `others/e2e-tests` directory structure with package.json and dependencies
    - Initialize npm project with Playwright, TypeScript
    - Configure scripts for running tests
    - _Requirements: 12.1, 12.5_
  - [x] 1.2 Create Playwright configuration file
    - Configure baseURL (localhost:3000), timeouts (60s), retries, reporters
    - Set up browser projects (chromium, firefox, webkit)
    - Configure screenshot and video capture on failure
    - _Requirements: 12.2, 12.5_
  - [x] 1.3 Create TypeScript configuration
    - Configure strict mode and path aliases
    - _Requirements: 12.3_

- [x] 2. Create test fixtures and utilities
  - [x] 2.1 Create test data file with user credentials
    - Define student, mentor, admin test users
    - Use seeded data credentials (admin@school.edu, mentor1@school.edu, student1@school.edu)
    - _Requirements: 1.5_
  - [x] 2.2 Create authentication fixture for pre-authenticated sessions
    - Implement login and save storage state for each role
    - Create fixtures that provide pre-authenticated pages
    - _Requirements: 12.4_
  - [x] 2.3 Create base page object with common methods
    - Implement goto, waitForLoad, getToastMessage, dismissToast
    - _Requirements: 12.3_
  - [x] 2.4 Create helper utilities
    - Implement wait helpers, assertion helpers
    - _Requirements: 12.3_

- [x] 3. Implement page objects
  - [x] 3.1 Create LoginPage object
    - Implement login form interactions, error message getters
    - _Requirements: 1.1, 1.2_
  - [x] 3.2 Create DashboardPage object
    - Implement stat card getters, role-specific element checks
    - _Requirements: 3.1, 3.2, 3.3_
  - [x] 3.3 Create navigation-related page objects (Sidebar, Layout)
    - Implement menu item clicks by href, scroll verification
    - Fixed duplicate element issues (mobile/desktop sidebars)
    - _Requirements: 2.1, 2.2_
  - [x] 3.4 Create CoursesPage and ClassesPage objects
    - Implement list getters, search/filter interactions
    - _Requirements: 4.1, 4.2, 4.3, 4.4_
  - [x] 3.5 Create SchedulePage object
    - Implement day-of-week section getters, class list getters
    - _Requirements: 5.1, 5.2, 5.3, 5.4_
  - [x] 3.6 Create AttendancePage object
    - Implement session controls, attendance marking, history view
    - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_
  - [x] 3.7 Create EnrollmentsPage object
    - Implement student list, search, add/remove enrollment
    - _Requirements: 7.1, 7.2, 7.3, 7.4_
  - [x] 3.8 Create NotificationsPage object
    - Implement notification list, dismiss, mark read
    - _Requirements: 8.1, 8.2, 8.3, 8.4_
  - [x] 3.9 Create ProfilePage object
    - Implement profile view, edit form, password change
    - _Requirements: 9.1, 9.2, 9.3_

- [x] 4. Implement authentication tests
  - [x] 4.1 Implement login success tests for all roles
    - Test student, mentor, admin login with valid credentials
    - Verify redirect to dashboard
    - _Requirements: 1.1, 1.5_
  - [x] 4.2 Write property test for valid credentials login
    - **Property 1: Valid credentials result in successful login**
    - **Validates: Requirements 1.1**
  - [x] 4.3 Implement login failure tests
    - Test invalid email, invalid password, empty fields
    - Verify error message display without page reload
    - _Requirements: 1.2_
  - [x] 4.4 Write property test for invalid credentials error
    - **Property 2: Invalid credentials show error without reload**
    - **Validates: Requirements 1.2**
  - [x] 4.5 Implement logout tests
    - Test logout confirmation dialog
    - Verify logout completes and redirects to login
    - _Requirements: 1.3_

- [x] 5. Implement navigation tests
  - [x] 5.1 Implement sidebar navigation tests
    - Test clicking each menu item loads correct page
    - Fixed to use href-based selectors for collapsed sidebar
    - _Requirements: 2.1_
  - [x] 5.2 Write property test for sidebar navigation
    - **Property 4: Sidebar navigation loads correct pages**
    - **Validates: Requirements 2.1**
  - [x] 5.3 Implement protected route tests
    - Test accessing protected routes without auth redirects to login
    - _Requirements: 2.3_
  - [x] 5.4 Write property test for protected routes
    - **Property 3: Protected routes redirect unauthenticated users**
    - **Validates: Requirements 2.3**
  - [x] 5.5 Implement role-specific menu tests
    - Test each role sees appropriate menu items
    - Fixed to check by href since sidebar may be collapsed
    - _Requirements: 2.4_
  - [x] 5.6 Write property test for role-specific menus
    - **Property 5: Role-specific menu items display correctly**
    - **Validates: Requirements 2.4**
  - [x] 5.7 Implement scroll behavior tests
    - Test content scrolls independently from sidebar
    - _Requirements: 2.2_

- [x] 6. Checkpoint - Ensure all tests pass
  - Auth tests: 10 tests
  - Navigation tests: 14 tests
  - Dashboard tests: 8 tests
  - Note: Tests require frontend (port 3000) and backend (port 8000) to be running

- [x] 7. Implement dashboard tests
  - [x] 7.1 Implement student dashboard tests
    - Verify student-specific stats display
    - _Requirements: 3.1_
  - [x] 7.2 Implement mentor dashboard tests
    - Verify mentor-specific stats display
    - _Requirements: 3.2_
  - [x] 7.3 Implement admin dashboard tests
    - Verify admin-specific stats display
    - _Requirements: 3.3_
  - [x] 7.4 Write property test for role-specific dashboard
    - **Property 6: Role-specific dashboard data displays correctly**
    - **Validates: Requirements 3.1, 3.2, 3.3**
  - [x] 7.5 Implement dashboard loading state tests
    - Verify loading indicators and error handling
    - _Requirements: 3.4_

- [x] 8. Implement courses and classes tests
  - [x] 8.1 Implement student courses view tests
    - Test student can view courses page
    - Test student sees enrolled courses
    - _Requirements: 4.1_
  - [x] 8.2 Implement mentor classes view tests
    - Test mentor can view classes page
    - Test mentor sees assigned classes
    - _Requirements: 4.2_
  - [x] 8.3 Implement admin courses view tests
    - Test admin can view all courses
    - Test admin sees courses with management options
    - _Requirements: 4.3_
  - [x] 8.4 Implement search/filter tests
    - Test search updates course results
    - Test clearing search restores results
    - _Requirements: 4.4_
  - [x] 8.5 Write property test for search/filter
    - **Property 7: Search/filter updates results correctly**
    - **Validates: Requirements 4.4**

- [x] 9. Implement schedule tests
  - [x] 9.1 Implement schedule organization tests
    - Test schedule displays classes organized by day
    - Test schedule shows day headers
    - _Requirements: 5.1_
  - [x] 9.2 Implement student schedule tests
    - Test student can view their schedule
    - _Requirements: 5.2_
  - [x] 9.3 Implement mentor schedule tests
    - Test mentor can view their schedule
    - _Requirements: 5.3_
  - [x] 9.4 Implement sticky header tests
    - Test schedule page loads correctly
    - _Requirements: 5.4_

- [x] 10. Implement attendance tests
  - [x] 10.1 Implement session start tests
    - Test mentor can view attendance page
    - Test mentor sees session controls
    - _Requirements: 6.1_
  - [x] 10.2 Implement session end tests
    - Test mentor can access attendance management
    - _Requirements: 6.2_
  - [x] 10.3 Implement manual attendance marking tests
    - Test mentor can view student list
    - _Requirements: 6.3_
  - [x] 10.4 Implement student attendance history tests
    - Test student can view attendance page
    - Test student can view their attendance history
    - _Requirements: 6.4_
  - [x] 10.5 Implement admin spectate tests
    - Test admin can view attendance page
    - Test admin has spectate access
    - _Requirements: 6.5_

- [x] 11. Checkpoint - Ensure all tests pass
  - Tests implemented: 83 total across 10 test files
  - All tests passing after timeout fixes

- [x] 12. Implement enrollment tests
  - [x] 12.1 Implement enrollment display tests
    - Test mentor can view enrollments page
    - Test enrollments display student information
    - _Requirements: 7.1_
  - [x] 12.2 Implement student search tests
    - Test search input is available
    - Test search can be performed
    - _Requirements: 7.2_
  - [x] 12.3 Implement add enrollment tests
    - Test mentor can access enrollment management
    - _Requirements: 7.3_
  - [x] 12.4 Implement remove enrollment tests
    - Test mentor can view enrollment list
    - Test admin can view/manage enrollments
    - _Requirements: 7.4_

- [x] 13. Implement notification tests
  - [x] 13.1 Implement notification display tests
    - Test user can view notifications page
    - Test notifications display with content
    - _Requirements: 8.1_
  - [x] 13.2 Implement notification dismiss tests
    - Test notifications page is accessible
    - _Requirements: 8.2_
  - [x] 13.3 Implement mark as read tests
    - Test notifications can be viewed
    - Test all roles can access notifications
    - _Requirements: 8.3_

- [x] 14. Implement profile tests
  - [x] 14.1 Implement profile view tests
    - Test user can view profile page
    - Test profile displays user information
    - _Requirements: 9.1_
  - [x] 14.2 Implement profile update tests
    - Test profile page is accessible for editing
    - _Requirements: 9.2_
  - [x] 14.3 Implement password change tests
    - Test profile page loads for password management
    - Test all roles can access profile
    - _Requirements: 9.3_

- [x] 15. Implement error handling tests
  - [x] 15.1 Implement API error tests
    - Test handles network errors gracefully
    - _Requirements: 11.1_
  - [x] 15.2 Implement loading state tests
    - Test page loads without crashing
    - _Requirements: 11.2_
  - [x] 15.3 Implement form validation tests
    - Test login form validates empty email
    - Test login form validates empty password
    - Test login form validates both empty fields
    - _Requirements: 11.3_
  - [x] 15.4 Write property test for form validation
    - **Property 8: Form validation prevents empty submissions**
    - **Validates: Requirements 11.3**
  - [x] 15.5 Implement rapid action tests
    - Test handles rapid navigation clicks
    - Test handles rapid form submissions
    - _Requirements: 11.4_

- [x] 16. Final Checkpoint - Ensure all tests pass
  - All test implementations complete
  - Total: 83 tests across 10 test files - ALL PASSING
  - Run with: `npx playwright test --project=chromium --reporter=list`
